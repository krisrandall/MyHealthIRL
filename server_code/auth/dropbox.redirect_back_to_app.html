<!-- This page must be setup as the redirect URI at https://www.dropbox.com/developers/apps/info/7o1hlldcmb28dk5 -->
<html>
	<head>
		<script>


			function getToken(tokenName) {
				tokenName = tokenName+'=';
				var everything = window.location.hash;
				var tokenPlus = everything.substr(everything.indexOf(tokenName));
				var access_token = tokenPlus.substring(tokenName.length, tokenPlus.indexOf('&'));
				return access_token;	
			}



			// actually I don't really redirect back .. I simply put the values here for the calling code to fetch
			window.onload = function () {

				// Expect : #access_token=ABCDEFG&token_type=bearer&account_id=dbid%3AAAH4f99T0taONIb-OurWxbNQ6ywGRopQngc&uid=12345&state=[STATE]

				document.getElementById('access_token').value = getToken('access_token');

				// display it for the in-browser version
				document.getElementById('atd').innerHTML = getToken('access_token');

			}

		</script>
	</head>
	<body>
		<input type="hidden" id="access_token"></input>
		Connected to Dropbox ...<br/>
		Obtained access token : <span id="atd"></span> ...<br/>
		Returning to app ...
	</body>
</html>